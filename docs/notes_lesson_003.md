# Пояснения и примечания по уроку №003

## Формулировка задания

Начать реализацию класса «Хранилище» для серверной стороны.
Хранение необходимо осуществлять в базе данных. В качестве СУБД использовать
sqlite. Для взаимодействия с БД можно применять ORM.
Опорная схема базы данных:
На стороне сервера БД содержит следующие таблицы:

1. все пользователи:

* логин;
* информация (время последнего входа).

2. активные пользователи:

* id_клиента
* время входа;
* ip-адрес;
* port.

3. история клиента:

* id_клиента
* время входа;
* ip-адрес;
* port.

## Примечания

1. Не совсем понимаю почему в приведённом примере классы описывались внутри 
   класса (`ServerStorage`). Думаю что сам класс потом преобразуем в одиночку, 
   однако это, на мой взгляд, даже хуже того кода который я написал.
2. Попробую сделать нормальный рефакторинг - уже какое-то понимание проекта 
   есть (по-хорошему нужно было подробно описать проект в начале курса 
   "Клиент-серверные" приложения). Если не буду успевать - возьму реализацию 
   примера (хотя она мне крайне не нравиться).
3. В приведённом примере и в моей реализации корректная работа происходит 
   только при штатных завершениях соединений с клиентом (нет отработки разрывов).
   Поставил очистку всех активных соединений перед стартом и после выключения сервера.
4. Вместо трёх различных таблиц в БД можно было обойтись двумя, — таблица 
   пользователей с флагом `is_active` и таблица истории подключений.